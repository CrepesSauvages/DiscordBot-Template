<!DOCTYPE html>
<html>
<head>
    <title><%= translate('dashboard.welcome.title') %></title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">
                <img src="/img/bot-logo.png" alt="Bot Logo">
            </div>
            <nav>
                <a href="/" class="active">
                    <i class="material-icons">dashboard</i>
                    Dashboard
                </a>
                <% if (user) { %>
                    <a href="/support">
                        <i class="material-icons">help</i>
                        Support
                    </a>
                    <a href="/premium">
                        <i class="material-icons">star</i>
                        Premium
                    </a>
                <% } %>
            </nav>
        </div>

        <div class="main-content">
            <div class="top-bar">
                <% if (user) { %>
                    <div class="user-profile">
                        <img src="https://cdn.discordapp.com/avatars/<%= user.id %>/<%= user.avatar %>.png" alt="Avatar">
                        <span><%= user.username %></span>
                    </div>
                <% } %>
            </div>

            <div class="content">
                <% if (!user) { %>
                    <div class="welcome-section">
                        <h1><%= translate('dashboard.welcome.title') %></h1>
                        <p><%= translate('dashboard.welcome.subtitle') %></p>
                        <a href="/auth/login" class="btn-login">
                            <i class="material-icons">login</i>
                            <%= translate('dashboard.welcome.login') %>
                        </a>
                    </div>
                <% } else { %>
                    <div class="servers-section">
                        <div class="servers-header">
                            <h1><%= translate('dashboard.servers.title') %></h1>
                            <div class="search-bar">
                                <i class="material-icons">search</i>
                                <input type="text" id="serverSearch" 
                                       placeholder="<%= translate('dashboard.servers.search') %>">
                            </div>
                        </div>
                        
                        <div class="servers-grid">
                            <% guilds.forEach(guild => { %>
                                <div class="server-card <%= botGuilds.includes(guild.id) ? 'has-bot' : '' %>">
                                    <div class="server-banner" style="background: linear-gradient(45deg, #2193b0, #6dd5ed);">
                                        <img src="<%= guild.icon ? `https://cdn.discordapp.com/icons/${guild.id}/${guild.icon}.png` : '/img/default_guild.png' %>" 
                                             alt="<%= guild.name %>">
                                    </div>
                                    <div class="server-info">
                                        <h3><%= guild.name %></h3>
                                        <% if (botGuilds.includes(guild.id)) { %>
                                            <a href="/guild/<%= guild.id %>/settings" class="btn-go">
                                                <%= translate('dashboard.servers.manage') %>
                                            </a>
                                        <% } else { %>
                                            <a href="<%= `https://discord.com/oauth2/authorize?client_id=${clientId}&permissions=8&scope=bot%20applications.commands&guild_id=${guild.id}` %>" 
                                               class="btn-setup">
                                                <%= translate('dashboard.servers.setup') %>
                                            </a>
                                        <% } %>
                                    </div>
                                </div>
                            <% }); %>
                        </div>
                    </div>
                <% } %>
            </div>
        </div>
    </div>

    <script>
        const translations = "<%- JSON.stringify(translations) %>";
    </script>
    <script src="/js/index.js"></script>
</body>
</html> 